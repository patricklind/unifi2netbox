services:
  unifi2netbox:
    build:
      context: .
    image: unifi2netbox:latest
    container_name: unifi2netbox
    environment:
      - LOG_LEVEL=${LOG_LEVEL}
      - UNIFI_API_KEY=${UNIFI_API_KEY}
      - UNIFI_API_KEY_HEADER=${UNIFI_API_KEY_HEADER}
      - UNIFI_VERIFY_SSL=${UNIFI_VERIFY_SSL}
      - UNIFI_PERSIST_SESSION=${UNIFI_PERSIST_SESSION}
      - NETBOX_URL=${NETBOX_URL}
      - NETBOX_TOKEN=${NETBOX_TOKEN}
      - NETBOX_IMPORT_TENANT=${NETBOX_IMPORT_TENANT}
      - NETBOX_TENANT=${NETBOX_TENANT}
      - NETBOX_VERIFY_SSL=${NETBOX_VERIFY_SSL}
      - NETBOX_DEVICE_STATUS=${NETBOX_DEVICE_STATUS}
      - NETBOX_SERIAL_MODE=${NETBOX_SERIAL_MODE}
      - NETBOX_VRF_MODE=${NETBOX_VRF_MODE}
      - DHCP_AUTO_DISCOVER=${DHCP_AUTO_DISCOVER}
      - NETBOX_ROLE_WIRELESS=${NETBOX_ROLE_WIRELESS}
      - NETBOX_ROLE_LAN=${NETBOX_ROLE_LAN}
      - NETBOX_ROLE_GATEWAY=${NETBOX_ROLE_GATEWAY}
      - NETBOX_ROLE_ROUTER=${NETBOX_ROLE_ROUTER}
      - NETBOX_ROLE_UNKNOWN=${NETBOX_ROLE_UNKNOWN}
      - UNIFI_USE_SITE_MAPPING=${UNIFI_USE_SITE_MAPPING}
      - UNIFI_SPECS_AUTO_REFRESH=${UNIFI_SPECS_AUTO_REFRESH}
      - UNIFI_SPECS_INCLUDE_STORE=${UNIFI_SPECS_INCLUDE_STORE}
      - UNIFI_SPECS_REFRESH_TIMEOUT=${UNIFI_SPECS_REFRESH_TIMEOUT}
      - UNIFI_SPECS_STORE_TIMEOUT=${UNIFI_SPECS_STORE_TIMEOUT}
      - UNIFI_SPECS_STORE_MAX_WORKERS=${UNIFI_SPECS_STORE_MAX_WORKERS}
      - UNIFI_SPECS_WRITE_CACHE=${UNIFI_SPECS_WRITE_CACHE}
      - SYNC_INTERFACES=${SYNC_INTERFACES}
      - SYNC_VLANS=${SYNC_VLANS}
      - SYNC_WLANS=${SYNC_WLANS}
      - SYNC_CABLES=${SYNC_CABLES}
      - SYNC_STALE_CLEANUP=${SYNC_STALE_CLEANUP}
      - SYNC_VM=${SYNC_VM}
      - NETBOX_CLEANUP=${NETBOX_CLEANUP}
      - CLEANUP_STALE_DAYS=${CLEANUP_STALE_DAYS}
      - SYNC_INTERVAL=${SYNC_INTERVAL}
      - UNIFI_REQUEST_TIMEOUT=${UNIFI_REQUEST_TIMEOUT}
      - UNIFI_HTTP_RETRIES=${UNIFI_HTTP_RETRIES}
      - UNIFI_RETRY_BACKOFF_BASE=${UNIFI_RETRY_BACKOFF_BASE}
      - UNIFI_RETRY_BACKOFF_MAX=${UNIFI_RETRY_BACKOFF_MAX}


    volumes:
      - ./logs:/app/logs
      - ./data:/app/data
    command: ["python", "main.py", "-v"]
    restart: unless-stopped
